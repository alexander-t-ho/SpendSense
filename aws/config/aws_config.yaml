# AWS Configuration for SpendSense
# Environment: development
# Region: us-east-1

aws:
  region: us-east-1
  profile: default  # AWS CLI profile name
  iam_user: SpendSense_AlexHo  # IAM user for SpendSense project
  
environment: development

# S3 Bucket Configuration
# Bucket names will be auto-generated with unique suffixes
s3:
  buckets:
    parquet_data:
      prefix: "spendsense-parquet-data"
      lifecycle_days: 90  # Transition to Glacier after 90 days
    insights:
      prefix: "spendsense-insights"
      lifecycle_days: 7  # Delete temporary cache after 7 days
    historical:
      prefix: "spendsense-historical"
      lifecycle_days: 365  # Keep historical data for 1 year

# DynamoDB Configuration
dynamodb:
  tables:
    insights_metadata:
      name: "spendsense-insights-metadata-dev"
      billing_mode: "PAY_PER_REQUEST"  # On-demand
      attributes:
        - name: user_id
          type: S  # String
        - name: insight_type
          type: S  # String
    user_preferences:
      name: "spendsense-user-preferences-dev"
      billing_mode: "PAY_PER_REQUEST"  # On-demand
      attributes:
        - name: user_id
          type: S  # String

# Lambda Configuration
lambda:
  runtime: python3.11
  timeout: 300  # 5 minutes
  memory: 1024  # 1024 MB (increased for better performance and to avoid timeouts)
  functions:
    weekly_recap:
      name: "alexho-spendsense-insights-weekly-recap-dev"
      handler: "handler.lambda_handler"
      description: "Compute weekly spending recaps"
    spending_analysis:
      name: "alexho-spendsense-insights-spending-analysis-dev"
      handler: "handler.lambda_handler"
      description: "Compute 6-month spending analysis"
    net_worth:
      name: "alexho-spendsense-insights-net-worth-dev"
      handler: "handler.lambda_handler"
      description: "Calculate and store net worth snapshots"
    budget_suggestion:
      name: "alexho-spendsense-insights-budget-suggestion-dev"
      handler: "handler.lambda_handler"
      description: "Generate AI-suggested budgets"
    budget_tracking:
      name: "alexho-spendsense-insights-budget-tracking-dev"
      handler: "handler.lambda_handler"
      description: "Track budget vs actual spending"
    main_api:
      name: "alexho-spendsense-api-dev"
      handler: "handler.lambda_handler"
      description: "Main SpendSense FastAPI application"
      timeout: 300  # 5 minutes for full API
      memory: 2048  # 2GB for full application

# API Gateway Configuration
api_gateway:
  name: "spendsense-insights-api-dev"
  description: "SpendSense Insights API for development"
  stage: "dev"
  rate_limit: 1000  # Requests per minute
  burst_limit: 2000  # Burst capacity

# CloudWatch Configuration
cloudwatch:
  log_retention_days: 7
  alarms:
    lambda_error_rate:
      threshold: 5.0  # Percentage
      evaluation_periods: 2
    api_latency:
      threshold: 2000  # Milliseconds
      evaluation_periods: 2

# IAM Role Configuration
iam:
  lambda_role: "AlexHoSpendSenseLambdaRole-dev"
  api_role: "AlexHoSpendSenseAPIRole-dev"

